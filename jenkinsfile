node {
    git url: 'https://github.com/mygitws/art_up_and_download.git'

    // Get Artifactory server instance, defined in the Artifactory Plugin administration page.
    def server = Artifactory.server SERVER_ID

    def buildInfo = Artifactory.newBuildInfo()
    // Set custom build name and number.
    //buildInfo.setName 'holyFrog'
    //buildInfo.setNumber '42'

    // Read the upload spec which was downloaded from github.
    def uploadSpec = readFile 'uploadspec.json'
    // Upload to Artifactory.
    server.upload spec: uploadSpec, buildInfo: buildInfo

    // The download file contains pattern for downloading artifacts to the root directory by setting recursive=false
    //def downloadSpec = readFile 'downloadspec.json'
    //server.download spec: downloadSpec, buildInfo: buildInfo
    
    // Download using AQL (Artifactory Query Language)
    //def downloadspec2 = readfile 'downloadspec_aql.json'
    //server.download spec: downloadSpec2, buildInfo: buildInfo
    
    def downloadSpec2 = readFile 'downloadspec_aql.json'
    server.download spec: downloadSpec2, buildInfo: buildInfo

    // Publish build info.
    server.publishBuildInfo buildInfo
}
